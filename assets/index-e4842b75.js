import{h as B,s as F,i as G,e as T,g as L}from"./index-9c0fc859.js";import{S as b}from"./index-fdcfd674.js";import{_ as U}from"./index-b5fe9ad4.js";import{f as q,r as v,bo as A,bx as E,bp as r,D as I,aX as c,aY as y,b4 as i,b5 as o,b0 as n,b1 as h,b2 as f,b3 as a,ac as m,a$ as k,ao as R,br as P,bD as W,be as X,a_ as Y}from"./index-3f4e5f1d.js";import{d as j,a as H,N as J}from"./index-6cc41aae.js";import"./_plugin-vue_export-helper-c27b6911.js";const K={class:"h-full"},O={class:"p-2"},Q={class:"overflow-auto w-full mt-[20px] bg-slate-200 dark:bg-zinc-900 rounded-xl",style:{height:"calc(100% - 65px)"}},Z={class:"flex items-center"},ee={class:"mr-[10px]"},se={class:"ml-auto"},le={class:"ml-[10px]"},de=q({__name:"index",setup(te){const x=v(null),p=A(),S=E(),u=v(!1),w={title:"",icon:"material-symbols:folder-outline",sort:9999},t=v({show:!1,editStatus:1,model:w,rules:{title:[{required:!0,trigger:"blur",message:r("form.required")}]}}),d=v([]);function C(){t.value.show=!t.value.show}function z(s){t.value.show=!0,t.value.model=s,t.value.editStatus=2}function N(){u.value=!0}function $(){const s=[];for(let e=0;e<d.value.length;e++){const l=d.value[e];s.push({id:l.id,sort:e+1})}F(s).then(({code:e,msg:l})=>{e===0?(p.success(r("common.saveSuccess")),u.value=!1):p.error(`${r("common.saveFail")}:${l}`)})}function D(s){S.warning({title:r("common.warning"),content:r("apps.itemGroupManage.deleteWarnText",{name:s.title}),positiveText:r("common.confirm"),negativeText:r("common.cancel"),onPositiveClick:()=>{s.id&&G([s.id]).then(({code:e,msg:l})=>{e!==0?p.error(r("common.deleteFail")):g()})}})}function M(){var s;(s=x.value)==null||s.validate(e=>{e?console.log(e):T(t.value.model).then(({code:l,msg:_})=>{l!==0&&p.error(_),g(),t.value.show=!1,t.value.model={...w}})})}function g(){L().then(({code:s,data:e})=>{d.value=e.list})}return I(()=>{g()}),(s,e)=>(c(),y("div",K,[i("div",O,[o(a(m),{type:"success",size:"small",style:{"margin-right":"10px"},onClick:C},{default:n(()=>[h(f(s.$t("common.add")),1)]),_:1}),u.value?(c(),k(a(m),{key:1,type:"warning",size:"small",onClick:$},{default:n(()=>[h(f(s.$t("common.saveSort")),1)]),_:1})):(c(),k(a(m),{key:0,size:"small",onClick:N},{default:n(()=>[h(f(s.$t("common.sort")),1)]),_:1}))]),i("div",Q,[o(a(B),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),"item-key":"sort",animation:300,style:Y({padding:u.value?"20px":"10px"}),disabled:!u.value},{default:n(()=>[(c(!0),y(R,null,P(d.value,(l,_)=>(c(),y("div",{key:_,class:"w-full"},[o(a(W),{size:"small",style:{"border-radius":"10px","margin-bottom":"10px"}},{default:n(()=>[i("div",{class:X(["flex",u.value?"cursor-move":""])},[i("div",Z,[i("span",ee,[o(a(b),{class:"text-[20px]",icon:"material-symbols:ad-group-outline-rounded"})]),i("span",null,f(l.title),1)]),i("div",se,[i("span",null,[o(a(m),{strong:"",secondary:"",type:"success",size:"small",onClick:V=>z(l)},{icon:n(()=>[o(a(b),{icon:"basil:edit-solid"})]),_:2},1032,["onClick"])]),i("span",le,[o(a(m),{strong:"",secondary:"",type:"error",size:"small",class:"ml-[10px]",onClick:V=>D(l)},{icon:n(()=>[o(a(b),{icon:"material-symbols:delete"})]),_:2},1032,["onClick"])])])],2)]),_:2},1024)]))),128))]),_:1},8,["modelValue","style","disabled"])]),o(a(U),{show:t.value.show,"onUpdate:show":e[2]||(e[2]=l=>t.value.show=l),size:"small",type:"small",title:t.value.editStatus===1?"添加":"编辑",style:{width:"400px"}},{footer:n(()=>[o(a(m),{type:"success",size:"small",class:"float-right",onClick:M},{default:n(()=>[h(f(s.$t("common.confirm")),1)]),_:1})]),default:n(()=>[o(a(j),{ref_key:"formRef",ref:x,model:t.value.model,rules:t.value.rules},{default:n(()=>[o(a(H),{path:"title",label:s.$t("apps.itemGroupManage.groupName")},{default:n(()=>[o(a(J),{value:t.value.model.title,"onUpdate:value":e[1]||(e[1]=l=>t.value.model.title=l),type:"text",maxlength:20,"show-count":""},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["show","title"])]))}});export{de as default};
